<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eclipse IDE-like Interface with Live Stock Data Chart</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <style>
        /* Custom styles for the Eclipse-like interface */
        body {
            font-family: 'Arial', sans-serif;
            height: 100vh;
            overflow: hidden;
        }
        #sidebar {
            background-color: #343a40;
            color: white;
            height: 100%;
            position: fixed;
            width: 250px;
            top: 0;
            left: 0;
            padding-top: 20px;
        }
        #mainContent {
            margin-left: 250px;
            padding: 20px;
            height: 100%;
            overflow: hidden;
        }
        .tab-content {
            height: calc(100% - 50px); /* Account for the toolbar height */
            overflow-y: auto;
        }
        .tab-pane {
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
            height: 100%;
        }
        .nav-tabs .nav-link {
            border-radius: 0;
        }
        .toolbar {
            border-bottom: 2px solid #ddd;
            padding: 10px;
            background-color: #f8f9fa;
        }
        .toolbar button {
            margin-right: 10px;
        }
        .nav-link.active {
            background-color: #007bff;
            color: white;
        }
        .nav-item {
            width: 100%;
        }
        .nav-pills .nav-link {
            border-radius: 0;
        }
    </style>
</head>
<body>

    <!-- Sidebar (Left Panel) -->
    <div id="sidebar" class="d-flex flex-column p-3">
        <h4 class="text-center text-white py-3">Eclipse IDE</h4>
        <div class="d-flex flex-column">
            <button class="btn btn-dark mb-2" id="newFileBtn">File</button>
            <button class="btn btn-dark mb-2" id="newChartBtn">New Chart</button>
            <button class="btn btn-dark mb-2">Edit</button>
            <button class="btn btn-dark mb-2">View</button>
            <button class="btn btn-dark mb-2">Run</button>
            <button class="btn btn-dark mb-2">Debug</button>
            <button class="btn btn-dark mb-2">Window</button>
        </div>
    </div>

    <!-- Main Content Area (Right Pane) -->
    <div id="mainContent">
        <!-- Toolbar -->
        <div class="toolbar d-flex justify-content-start align-items-center">
            <button class="btn btn-primary" id="newFileBtn">New File</button>
            <button class="btn btn-secondary" id="saveFileBtn">Save</button>
            <button class="btn btn-danger" id="closeFileBtn">Close File</button>
        </div>

        <!-- Tabs for File Content -->
        <ul class="nav nav-pills" id="fileTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="file1-tab" data-bs-toggle="pill" href="#file1" role="tab" aria-controls="file1" aria-selected="true">File 1</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="file2-tab" data-bs-toggle="pill" href="#file2" role="tab" aria-controls="file2" aria-selected="false">File 2</a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content mt-3" id="fileTabsContent">
            <div class="tab-pane fade show active" id="file1" role="tabpanel" aria-labelledby="file1-tab">
                <h5>File 1 Content</h5>
                <textarea class="form-control" rows="10">Type your code here...</textarea>
            </div>
            <div class="tab-pane fade" id="file2" role="tabpanel" aria-labelledby="file2-tab">
                <h5>File 2 Content</h5>
                <textarea class="form-control" rows="10">Type your code here...</textarea>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS & Popper -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        // JavaScript to manage the tabs dynamically
        const newFileBtn = document.getElementById('newFileBtn');
        const newChartBtn = document.getElementById('newChartBtn');
        const closeFileBtn = document.getElementById('closeFileBtn');
        const fileTabsContent = document.getElementById('fileTabsContent');
        const fileTabs = document.getElementById('fileTabs');

        // Add a new file tab dynamically
        newFileBtn.addEventListener('click', function() {
            const tabId = `file${fileTabs.children.length + 1}`;
            const tabLabel = `File ${fileTabs.children.length + 1}`;

            // Create new tab item
            const tabItem = document.createElement('li');
            tabItem.classList.add('nav-item');
            tabItem.setAttribute('role', 'presentation');

            const tabLink = document.createElement('a');
            tabLink.classList.add('nav-link');
            tabLink.setAttribute('id', `${tabId}-tab`);
            tabLink.setAttribute('data-bs-toggle', 'pill');
            tabLink.setAttribute('href', `#${tabId}`);
            tabLink.setAttribute('role', 'tab');
            tabLink.setAttribute('aria-controls', tabId);
            tabLink.setAttribute('aria-selected', 'false');
            tabLink.textContent = tabLabel;

            tabItem.appendChild(tabLink);
            fileTabs.appendChild(tabItem);

            // Create new content pane
            const newTabContent = document.createElement('div');
            newTabContent.classList.add('tab-pane', 'fade');
            newTabContent.setAttribute('id', tabId);
            newTabContent.setAttribute('role', 'tabpanel');
            newTabContent.setAttribute('aria-labelledby', `${tabId}-tab`);

            const newTextArea = document.createElement('textarea');
            newTextArea.classList.add('form-control');
            newTextArea.setAttribute('rows', '10');
            newTextArea.textContent = 'Type your code here...';

            newTabContent.appendChild(newTextArea);
            fileTabsContent.appendChild(newTabContent);

            // Set the new tab as active
            tabLink.classList.add('active');
            newTabContent.classList.add('show', 'active');
        });

        // Close the active tab
        closeFileBtn.addEventListener('click', function() {
            const activeTab = document.querySelector('.nav-link.active');
            const tabId = activeTab.getAttribute('id').split('-')[0];
            const tabPane = document.querySelector(`#${tabId}`);

            // Remove tab and content
            activeTab.parentElement.remove();
            tabPane.remove();
        });

        // Function to create a new chart tab
        newChartBtn.addEventListener('click', function() {
            const tabId = `chart${fileTabs.children.length + 1}`;
            const tabLabel = `Stock Chart ${fileTabs.children.length + 1}`;

            // Create new tab item for the chart
            const tabItem = document.createElement('li');
            tabItem.classList.add('nav-item');
            tabItem.setAttribute('role', 'presentation');

            const tabLink = document.createElement('a');
            tabLink.classList.add('nav-link');
            tabLink.setAttribute('id', `${tabId}-tab`);
            tabLink.setAttribute('data-bs-toggle', 'pill');
            tabLink.setAttribute('href', `#${tabId}`);
            tabLink.setAttribute('role', 'tab');
            tabLink.setAttribute('aria-controls', tabId);
            tabLink.setAttribute('aria-selected', 'false');
            tabLink.textContent = tabLabel;

            tabItem.appendChild(tabLink);
            fileTabs.appendChild(tabItem);

            // Create new content pane for the chart
            const newTabContent = document.createElement('div');
            newTabContent.classList.add('tab-pane', 'fade');
            newTabContent.setAttribute('id', tabId);
            newTabContent.setAttribute('role', 'tabpanel');
            newTabContent.setAttribute('aria-labelledby', `${tabId}-tab`);

            const chartDiv = document.createElement('div');
            chartDiv.id = `${tabId}-chart`;
            chartDiv.style.height = '400px';
            chartDiv.style.width = '100%';

            newTabContent.appendChild(chartDiv);
            fileTabsContent.appendChild(newTabContent);

            // Set the new tab as active
            tabLink.classList.add('active');
            newTabContent.classList.add('show', 'active');

            // Initialize Plotly chart
            const trace = {
                x: [],
                y: [],
                mode: 'lines+markers',
                type: 'scatter',
                name: 'Stock Price',
                line: { color: 'blue' }
            };

            const layout = {
                title: 'Live Stock Data',
                xaxis: { title: 'Time' },
                yaxis: { title: 'Price (USD)' },
            };

            let time = 0;
            let price = Math.random() * 1000;

            function updateChart() {
                time += 1;
                price += (Math.random() - 0.5) * 10; // Simulate random stock price change

                trace.x.push(time);
                trace.y.push(price);

                Plotly.react(chartDiv, [trace], layout);
            }

            // Update chart every 1 second (simulate live data)
            setInterval(updateChart, 1000);
        });
    </script>

</body>
</html>
